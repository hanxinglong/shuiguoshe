<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">小区列表</h3>
    
  </div>
  <div class="panel-body">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>#</th>
          <th>小区靓照</th>
          <th>小区名字</th>
          <th>小区地址</th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        <% @apartments.each do |apartment| %>
          <tr>
            <td><%= link_to apartment.id, [:cpanel, apartment] %></td>
            <td><%= image_tag apartment.image.small %></td>
            <td><%= apartment.name %></td>
            <td><%= apartment.address %></td>
            <td>
              <a href="#" data-remote="true" 
                          data-state="<%= apartment.is_open %>" 
                          data-id="<%= apartment.id %>" 
                          data-type="<%= apartment.class.to_s.pluralize.downcase %>" 
                          onclick="App.updateState(this);" 
                          class="btn btn-xs btn-primary">
                  <%= apartment.is_open ? "关闭" : "开放" %>
              </a>
              <%= link_to '编辑', edit_cpanel_apartment_path(apartment), class: "btn btn-xs btn-default" %>
              <%= link_to '删除', [:cpanel, apartment], method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-xs btn-danger" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  
  <div class="center"><%= will_paginate @apartments %></div>
  
</div>

<%= link_to '新建小区信息', new_cpanel_apartment_path, class: "btn btn-primary" %>

